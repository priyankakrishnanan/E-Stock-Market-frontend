<p-toast position="top-right"></p-toast>
<p-card>   
    <div class="p-grid p-fluid">
        <div class="p-col-12 p-md-4">
            <div class="p-inputgroup">
                <span class="p-inputgroup-addon">Company :</span>
                <input required type="text" maxlength="8" pInputText [(ngModel)]="search.companyCode" placeholder="company code">         
            </div>
        </div>
        <div class="p-col-12 p-md-4">
            <div class="p-inputgroup">
                <span class="p-inputgroup-addon">From :</span>
                <p-calendar [(ngModel)]="search.startDate"  dateFormat="dd/mm/yy" [showButtonBar]="true"
                 [readonlyInput]="true" hourFormat="24"></p-calendar>
            </div>
        </div>
        
        <div class="p-col-12 p-md-4">
            <div class="p-inputgroup">
                <span class="p-inputgroup-addon">To:</span>
                <p-calendar [(ngModel)]="search.endDate" dateFormat="dd/mm/yy" [showButtonBar]="true"
                [readonlyInput]="true" hourFormat="24"></p-calendar>
            </div>
        </div>
        </div>
        <p-button label="Find Stocks" (onClick)="findStocks()"></p-button>
    
    <p-table [value]="stocks" [scrollable]="true"  scrollHeight="200px">
        <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between" style="text-align: center">
                Stock Details
            </div>
            <div *ngIf="company" class="p-d-flex p-ai-center p-jc-between" style="text-align: center">
               {{company.companyName}}
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>Stock Price</th>
                <th>Date </th>    
                <th>Time </th>  
                
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-stock >
            <tr>
                <td>{{stock.price}}</td>  
                <td>{{stock.date | date:'mediumDate'}}</td>
                <td>{{stock.date | date:'fullTime'}}</td>
            </tr>
        </ng-template>
      </p-table>
<div *ngIf="search.startDate&&search.endDate">
      <div class="p-col-12 p-md-4">
        <div class="p-inputgroup">
            <span class="p-inputgroup-addon">Minimum Price : {{minPrice}}</span>   
        </div>

    </div>
    <div class="p-col-12 p-md-4">
        <div class="p-inputgroup">
            <span class="p-inputgroup-addon">Maximun Price : {{maxPrice}}</span>   
        </div>
    </div>
    <div class="p-col-12 p-md-4">
        <div class="p-inputgroup">
            <span class="p-inputgroup-addon">Average Price : {{avgPrice}}</span>   
        </div>
    </div>
    </div>
      
    </p-card> 
